(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{3875:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(5155),s=a(2115),n=a(5426),o=a(2733),l=a(7270),c=a(4251),d=a(9999);function i(){var e,t,a;let{state:i,updateForecastConfig:m}=(0,n.k_)(),{formatCurrency:x}=(0,l.H)(),{t:g}=(0,c.o)(),[h,u]=(0,s.useState)((null==(e=i.userPlan)?void 0:e.forecastConfig)||{startingBalance:(null==(t=i.userPlan)?void 0:t.currentBalance)||0,startDate:new Date().toISOString().slice(0,7),months:12,includeGoalContributions:!0,conservativeMode:!1,updatedAt:new Date().toISOString()}),[y,b]=(0,s.useState)("table"),[p,v]=(0,s.useState)(!1),[j,f]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),w=e=>({months:e.months,startingBalance:e.startingBalance,startDate:e.startDate?new Date(e.startDate+"-01"):void 0,includeGoalContributions:e.includeGoalContributions,conservativeMode:e.conservativeMode});(0,s.useEffect)(()=>{var e;(null==(e=i.userPlan)?void 0:e.forecastConfig)&&u(i.userPlan.forecastConfig)},[null==(a=i.userPlan)?void 0:a.forecastConfig]);let C=async e=>{let t={...h,...e};u(t);try{v(!0),await m(t)}catch(e){console.error("Failed to update forecast config:",e)}finally{v(!1)}},B=async()=>{try{v(!0),await m({...h,updatedAt:new Date().toISOString()})}catch(e){console.error("Failed to recalculate forecast:",e)}finally{v(!1)}},D=async()=>{try{var e;v(!0),f(!1);let t={startingBalance:(null==(e=i.userPlan)?void 0:e.currentBalance)||0,startDate:new Date().toISOString().slice(0,7),months:12,includeGoalContributions:!0,conservativeMode:!1,updatedAt:new Date().toISOString()};await m(t)}catch(e){console.error("Failed to reset forecast config:",e)}finally{v(!1)}},S=(0,s.useMemo)(()=>i.userPlan?(0,o.X0)(i.userPlan,w(h)):{monthlyForecasts:[],summary:{totalIncome:0,totalExpenses:0,totalGoalContributions:0,finalBalance:0,averageMonthlyIncome:0,averageMonthlyExpenses:0,averageMonthlyNet:0,lowestBalance:0,highestBalance:0,monthsWithNegativeBalance:0},goalProgress:[]},[i.userPlan,h]);(0,s.useEffect)(()=>{k(!0);let e=setTimeout(()=>k(!1),500);return()=>clearTimeout(e)},[h]);let M=e=>(0,d._3)(e+"-01",g,{includeYear:!0,shortMonth:!1,includeDate:!1}),P=()=>{let e=new Date(new Date(h.startDate+"-01"));return e.setMonth(e.getMonth()+h.months-1),{start:M(h.startDate),end:M(e.toISOString().slice(0,7))}},F=e=>e>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return i.loading.isLoading?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading forecast..."})]})}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"\uD83D\uDCC8 Financial Forecast"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Financial projections based on your current income, expenses, and goals. Choose your start date and forecast period."}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-blue-600 dark:text-blue-400",children:["Forecast period: ",P().start," to"," ",P().end,N&&(0,r.jsxs)("span",{className:"ml-2 inline-flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Recalculating..."]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 min-w-fit",children:"Starting Balance (THB)"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",min:"0",step:"0.01",value:h.startingBalance||"",onFocus:e=>"0"===e.target.value&&(e.target.value=""),onChange:e=>C({startingBalance:parseFloat(e.target.value)||0}),className:"w-40 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100 text-sm",placeholder:"0.00"}),(0,r.jsx)("button",{onClick:()=>{var e;return C({startingBalance:(null==(e=i.userPlan)?void 0:e.currentBalance)||0})},className:"px-3 py-2 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",title:"Reset to current balance",children:"Reset"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:B,disabled:p,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Recalculate forecast",children:p?"Calculating...":"Recalculate"}),(0,r.jsx)("button",{onClick:()=>f(!0),className:"px-4 py-2 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Reset all forecast settings to defaults",children:"Reset All"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 min-w-fit",children:"Start Date"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"month",value:h.startDate,onChange:e=>C({startDate:e.target.value}),className:"flex-1 px-3 py-2 rounded-lg border-gray-300 text-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600",title:"Select forecast start month"}),(0,r.jsx)("button",{onClick:()=>C({startDate:new Date().toISOString().slice(0,7)}),className:"px-3 py-2 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",title:"Reset to current month",children:"Now"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 min-w-fit",children:"Forecast Period"}),(0,r.jsxs)("select",{value:h.months,onChange:e=>C({months:parseInt(e.target.value)}),className:"flex-1 px-3 py-2 rounded-lg border-gray-300 text-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600",children:[(0,r.jsx)("option",{value:6,children:"6 months"}),(0,r.jsx)("option",{value:12,children:"1 year (12 months)"}),(0,r.jsx)("option",{value:18,children:"1.5 years (18 months)"}),(0,r.jsx)("option",{value:24,children:"2 years (24 months)"}),(0,r.jsx)("option",{value:36,children:"3 years (36 months)"}),(0,r.jsx)("option",{value:48,children:"4 years (48 months)"}),(0,r.jsx)("option",{value:60,children:"5 years (60 months)"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"conservativeMode",checked:h.conservativeMode,onChange:e=>C({conservativeMode:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"conservativeMode",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Conservative Mode"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"includeGoals",checked:h.includeGoalContributions,onChange:e=>C({includeGoalContributions:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"includeGoals",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include Goals"})]})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Final Balance"}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(F(S.summary.finalBalance)),children:x(S.summary.finalBalance)})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(S.summary.finalBalance>=0?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:(0,r.jsx)("svg",{className:"w-6 h-6 ".concat(F(S.summary.finalBalance)),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["After ",h.months," months"]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Income"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x(S.summary.totalIncome)})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Avg: ",x(S.summary.averageMonthlyIncome),"/month"]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Expenses"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x(S.summary.totalExpenses)})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Avg: ",x(S.summary.averageMonthlyExpenses),"/month"]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Goal Contributions"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x(S.summary.totalGoalContributions)})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Toward your goals"})]})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Forecast Details"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>b("table"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("table"===y?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Table View"}),(0,r.jsx)("button",{onClick:()=>b("chart"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("chart"===y?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Chart View"}),(0,r.jsx)("button",{onClick:()=>b("goals"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("goals"===y?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Goal Progress"})]})]})}),"table"===y&&(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Month"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Starting Balance"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Income"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Expenses"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Goals"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Net Change"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ending Balance"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:S.monthlyForecasts.map((e,t)=>(0,r.jsxs)("tr",{className:t%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:M(e.month)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:x(e.startingBalance)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 dark:text-green-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{children:["+",x(e.income)]}),e.incomeBreakdown.length>0&&(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg p-3 shadow-lg min-w-max max-w-xs border border-gray-600 dark:border-gray-500",children:[(0,r.jsxs)("div",{className:"font-semibold mb-2 text-center",children:[M(e.month)," Income"]}),(0,r.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:e.incomeBreakdown.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,r.jsx)("span",{className:"text-gray-300 truncate",children:e.name}),(0,r.jsxs)("span",{className:"font-medium text-green-300 whitespace-nowrap",children:["+",x(e.amount)]})]},t))}),(0,r.jsx)("div",{className:"border-t border-gray-600 dark:border-gray-500 mt-2 pt-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-green-300",children:["+",x(e.income)]})]})}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900 dark:border-b-gray-700"})]})})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 dark:text-red-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{children:["-",x(e.expenses)]}),e.expenseBreakdown.length>0&&(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg p-3 shadow-lg min-w-max max-w-xs border border-gray-600 dark:border-gray-500",children:[(0,r.jsxs)("div",{className:"font-semibold mb-2 text-center",children:[M(e.month)," Expenses"]}),(0,r.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:e.expenseBreakdown.map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-gray-300 truncate",children:[(0,r.jsx)("span",{children:e.name}),(null==(a=e.installmentInfo)?void 0:a.isInstallment)&&(0,r.jsxs)("span",{className:"text-xs text-blue-300 ml-2",children:["(",e.installmentInfo.currentMonth,"/",e.installmentInfo.totalMonths,")"]})]}),(0,r.jsxs)("span",{className:"font-medium text-red-300 whitespace-nowrap",children:["-",x(e.amount)]})]},t)})}),(0,r.jsx)("div",{className:"border-t border-gray-600 dark:border-gray-500 mt-2 pt-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-red-300",children:["-",x(e.expenses)]})]})}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900 dark:border-b-gray-700"})]})})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 dark:text-blue-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{children:["-",x(e.goalContributions)]}),e.goalBreakdown.length>0&&(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg p-3 shadow-lg min-w-max max-w-xs border border-gray-600 dark:border-gray-500",children:[(0,r.jsxs)("div",{className:"font-semibold mb-2 text-center",children:[M(e.month)," Goal Contributions"]}),(0,r.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:e.goalBreakdown.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,r.jsx)("span",{className:"text-gray-300 truncate",children:e.name}),(0,r.jsxs)("span",{className:"font-medium text-blue-300 whitespace-nowrap",children:["-",x(e.amount)]})]},t))}),(0,r.jsx)("div",{className:"border-t border-gray-600 dark:border-gray-500 mt-2 pt-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-blue-300",children:["-",x(e.goalContributions)]})]})}),(0,r.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900 dark:border-b-gray-700"})]})})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(F(e.netChange)),children:[e.netChange>=0?"+":"",x(e.netChange)]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(F(e.endingBalance)),children:x(e.endingBalance)})]},e.month))})]})})}),"chart"===y&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Balance Trend"}),(0,r.jsx)("div",{className:"h-64 flex items-end justify-between space-x-2",children:S.monthlyForecasts.map(e=>{let t,a=Math.max(...S.monthlyForecasts.map(e=>e.endingBalance),0),s=Math.min(...S.monthlyForecasts.map(e=>e.endingBalance),0),n=Math.max(a-s,1e3),o=Math.abs(s)/n;return t=Math.max(t=e.endingBalance>=0?e.endingBalance/n*100:(Math.abs(s)+e.endingBalance)/n*100,2),(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-t relative",style:{height:"200px"},children:[s<0&&(0,r.jsx)("div",{className:"absolute w-full border-t-2 border-gray-400 dark:border-gray-500 border-dashed",style:{bottom:"".concat(100*o,"%")}}),(0,r.jsx)("div",{className:"absolute bottom-0 w-full rounded-t transition-all duration-300 ".concat(e.endingBalance>=0?"bg-green-500 dark:bg-green-400":"bg-red-500 dark:bg-red-400"),style:{height:"".concat(t,"%")},title:"".concat(M(e.month),": ").concat(x(e.endingBalance))}),(0,r.jsx)("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full ".concat(e.netChange>=0?"bg-green-600 dark:bg-green-300":"bg-red-600 dark:bg-red-300"),title:"Net change: ".concat(x(e.netChange))})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:e.month.split("-")[1]})]},e.month)})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["Low: ",x(S.summary.lowestBalance)]}),(0,r.jsxs)("span",{children:["Avg Net:"," ",x(S.summary.averageMonthlyNet)]}),(0,r.jsxs)("span",{children:["High: ",x(S.summary.highestBalance)]})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center space-x-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 dark:bg-green-400 rounded mr-2"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Positive Balance"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-500 dark:bg-red-400 rounded mr-2"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Negative Balance"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gray-400 dark:bg-gray-500 rounded mr-2"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Zero Line"})]})]})]}),"goals"===y&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Goal Progress Projections"}),S.goalProgress.length>0?(0,r.jsx)("div",{className:"space-y-4",children:S.goalProgress.map(e=>(0,r.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x(e.projectedAmount)," of"," ",x(e.targetAmount)]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.projectedProgress.toFixed(1),"%"]}),(0,r.jsx)("p",{className:"text-xs ".concat(e.onTrack?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:e.onTrack?"On Track":"Behind Schedule"})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(e.projectedProgress>=100||e.onTrack?"bg-green-600 dark:bg-green-400":"bg-red-600 dark:bg-red-400"),style:{width:"".concat(Math.min(e.projectedProgress,100),"%")}})}),e.estimatedCompletionMonth&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Estimated completion:"," ",M(e.estimatedCompletionMonth)]})]},e.id))}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No active goals to track"})})]}),S.summary.monthsWithNegativeBalance>0&&(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-red-800 dark:text-red-200",children:"Cash Flow Warning"}),(0,r.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Your forecast shows"," ",S.summary.monthsWithNegativeBalance," months with negative balance. Consider adjusting your expenses or increasing income."]})]})]})}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg max-w-md mx-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Reset Forecast Configuration"}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"Are you sure you want to reset all forecast settings to defaults? This will restore starting balance to current balance, reset start date to current month, and restore other settings to their default values."}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:D,disabled:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Resetting...":"Reset All"})]})]})})]})}},4251:(e,t,a)=>{"use strict";a.d(t,{LanguageProvider:()=>l,o:()=>c});var r=a(5155),s=a(2115);let n={en:{code:"en",name:"English",nativeName:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},th:{code:"th",name:"Thai",nativeName:"ไทย",flag:"\uD83C\uDDF9\uD83C\uDDED"}},o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)("en"),[c,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem("finance-planner-language");e&&n[e]&&l(e),i(!0)},[]),(0,s.useEffect)(()=>{c&&localStorage.setItem("finance-planner-language",a)},[a,c]),(0,r.jsx)(o.Provider,{value:{language:a,setLanguage:e=>{l(e)},t:(e,t)=>{let r=d[a][e]||e;return t&&Object.entries(t).forEach(e=>{let[t,a]=e;r=r.replace("{{".concat(t,"}}"),String(a))}),r},getLanguageInfo:()=>n[a]},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}let d={en:{"nav.dashboard":"Dashboard","nav.income":"Income","nav.expenses":"Expenses","nav.goals":"Goals","nav.forecast":"Forecast","nav.goalPlanning":"Goal Planning","nav.importExport":"Import/Export","nav.menu":"Menu","dashboard.title":"Finance Planner","dashboard.monthlyIncome":"Monthly Income","dashboard.monthlyExpenses":"Monthly Expenses","dashboard.netIncome":"Net Income","dashboard.goalProgress":"Goal Progress","dashboard.upcomingGoals":"Upcoming Goals","dashboard.quickActions":"Quick Actions","common.amount":"Amount","common.name":"Name","common.category":"Category","common.priority":"Priority","common.status":"Status","common.save":"Save","common.cancel":"Cancel","common.edit":"Edit","common.delete":"Delete","common.add":"Add","common.loading":"Loading...","common.error":"Error","goals.targetAmount":"Target Amount","goals.currentAmount":"Current Amount","goals.targetDate":"Target Date","goals.progress":"Progress","currency.selector.title":"Select Currency","language.selector.title":"Select Language","month.january":"January","month.february":"February","month.march":"March","month.april":"April","month.may":"May","month.june":"June","month.july":"July","month.august":"August","month.september":"September","month.october":"October","month.november":"November","month.december":"December"},th:{"nav.dashboard":"แดชบอร์ด","nav.income":"รายได้","nav.expenses":"รายจ่าย","nav.goals":"เป้าหมาย","nav.forecast":"พยากรณ์","nav.goalPlanning":"วางแผนเป้าหมาย","nav.importExport":"นำเข้า/ส่งออก","nav.menu":"เมนู","dashboard.title":"วางแผนการเงิน","dashboard.monthlyIncome":"รายได้รายเดือน","dashboard.monthlyExpenses":"รายจ่ายรายเดือน","dashboard.netIncome":"รายได้สุทธิ","dashboard.goalProgress":"ความคืบหน้าเป้าหมาย","dashboard.upcomingGoals":"เป้าหมายที่จะมาถึง","dashboard.quickActions":"การดำเนินการด่วน","common.amount":"จำนวนเงิน","common.name":"ชื่อ","common.category":"หมวดหมู่","common.priority":"ความสำคัญ","common.status":"สถานะ","common.save":"บันทึก","common.cancel":"ยกเลิก","common.edit":"แก้ไข","common.delete":"ลบ","common.add":"เพิ่ม","common.loading":"กำลังโหลด...","common.error":"ข้อผิดพลาด","goals.targetAmount":"จำนวนเป้าหมาย","goals.currentAmount":"จำนวนปัจจุบัน","goals.targetDate":"วันที่เป้าหมาย","goals.progress":"ความคืบหน้า","currency.selector.title":"เลือกสกุลเงิน","language.selector.title":"เลือกภาษา","month.january":"มกราคม","month.february":"กุมภาพันธ์","month.march":"มีนาคม","month.april":"เมษายน","month.may":"พฤษภาคม","month.june":"มิถุนายน","month.july":"กรกฎาคม","month.august":"สิงหาคม","month.september":"กันยายน","month.october":"ตุลาคม","month.november":"พฤศจิกายน","month.december":"ธันวาคม"}}},4571:(e,t,a)=>{Promise.resolve().then(a.bind(a,3875))},7270:(e,t,a)=>{"use strict";a.d(t,{CurrencyProvider:()=>l,H:()=>c,V:()=>n});var r=a(5155),s=a(2115);let n={USD:{code:"USD",symbol:"$",name:"US Dollar",locale:"en-US"},EUR:{code:"EUR",symbol:"€",name:"Euro",locale:"en-US"},GBP:{code:"GBP",symbol:"\xa3",name:"British Pound",locale:"en-GB"},JPY:{code:"JPY",symbol:"\xa5",name:"Japanese Yen",locale:"ja-JP"},THB:{code:"THB",symbol:"฿",name:"Thai Baht",locale:"th-TH"},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar",locale:"en-AU"},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar",locale:"en-CA"},CHF:{code:"CHF",symbol:"Fr",name:"Swiss Franc",locale:"de-CH"},CNY:{code:"CNY",symbol:"\xa5",name:"Chinese Yuan",locale:"zh-CN"},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar",locale:"en-SG"},INR:{code:"INR",symbol:"₹",name:"Indian Rupee",locale:"en-IN"},KRW:{code:"KRW",symbol:"₩",name:"South Korean Won",locale:"ko-KR"}},o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)("USD"),[c,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("finance-planner-currency");e&&n[e]&&l(e),d(!0)},[]),(0,s.useEffect)(()=>{c&&localStorage.setItem("finance-planner-currency",a)},[a,c]);let i=()=>n[a];return(0,r.jsx)(o.Provider,{value:{currency:a,setCurrency:e=>{l(e)},formatCurrency:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i();return t&&Math.abs(e)>=1e6?new Intl.NumberFormat(a.locale,{style:"currency",currency:a.code,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:1}).format(e):new Intl.NumberFormat(a.locale,{style:"currency",currency:a.code,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},formatNumber:e=>{let t=i();return new Intl.NumberFormat(t.locale,{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},parseCurrency:e=>{let t=parseFloat(e.replace(/[฿$€£¥₹₩Fr,\s]/g,"").replace(/[A-Z]/g,"").replace(/[^\d.-]/g,""));return isNaN(t)?0:t},getCurrencyInfo:i},children:t})}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}},9999:(e,t,a)=>{"use strict";function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};let r=new Date(e+"-01"),s="th"===t?"th-TH":"en-US";return r.toLocaleDateString(s,{year:"numeric",month:"long",...a})}function s(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="string"==typeof e?new Date(e):e,s=r.getMonth(),n=r.getDate(),o=r.getFullYear(),l=function(e,t){let a=["month.january","month.february","month.march","month.april","month.may","month.june","month.july","month.august","month.september","month.october","month.november","month.december"];return t(a[e]||a[0])}(s,t),c=a.shortMonth?l.slice(0,3):l,d=void 0===a.includeDate||a.includeDate;return!d&&a.includeYear?"".concat(c," ").concat(o):d?a.includeYear?"".concat(n," ").concat(c," ").concat(o):"".concat(n," ").concat(c):"".concat(c)}a.d(t,{Pm:()=>r,_3:()=>s})}},e=>{var t=t=>e(e.s=t);e.O(0,[930,880,441,684,358],()=>t(4571)),_N_E=e.O()}]);