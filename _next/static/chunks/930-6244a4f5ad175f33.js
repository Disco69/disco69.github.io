"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{3818:(e,a,r)=>{r.d(a,{m:()=>l});var n=r(7119),t=r(4479),E=r(4552);function o(e,a){let r={...a,updatedAt:new Date().toISOString()},n=function(e){let a=e.income.filter(e=>e.isActive).reduce((e,a)=>{switch(a.frequency){case E.jN.MONTHLY:return e+a.amount;case E.jN.WEEKLY:return e+4.33*a.amount;case E.jN.BIWEEKLY:return e+2.17*a.amount;case E.jN.DAILY:return e+30.44*a.amount;case E.jN.QUARTERLY:return e+a.amount/3;case E.jN.YEARLY:return e+a.amount/12;default:return e}},0),r=e.expenses.filter(e=>e.isActive).reduce((e,a)=>{if(!a.recurring)return e;switch(a.frequency){case E.jN.MONTHLY:return e+a.amount;case E.jN.WEEKLY:return e+4.33*a.amount;case E.jN.BIWEEKLY:return e+2.17*a.amount;case E.jN.DAILY:return e+30.44*a.amount;case E.jN.QUARTERLY:return e+a.amount/3;case E.jN.YEARLY:return e+a.amount/12;default:return e}},0),n=e.goals.filter(e=>e.isActive).reduce((e,a)=>e+a.currentAmount,0),t=e.goals.filter(e=>e.isActive).reduce((e,a)=>e+a.targetAmount,0),o=e.currentBalance+a-r,l=e.expenses.filter(e=>e.isActive).reduce((e,a)=>{let r=a.recurring?(()=>{switch(a.frequency){case E.jN.MONTHLY:return a.amount;case E.jN.WEEKLY:return 4.33*a.amount;case E.jN.BIWEEKLY:return 2.17*a.amount;case E.jN.DAILY:return 30.44*a.amount;case E.jN.QUARTERLY:return a.amount/3;case E.jN.YEARLY:return a.amount/12;default:return 0}})():0;return e[a.category]=(e[a.category]||0)+r,e},{});Object.values(E.Lc).forEach(e=>{e in l||(l[e]=0)});let s=e.goals.filter(e=>e.isActive).reduce((e,a)=>(e[a.category]=(e[a.category]||0)+a.currentAmount,e),{});return Object.values(E.QO).forEach(e=>{e in s||(s[e]=0)}),{totalMonthlyIncome:a,totalMonthlyExpenses:r,totalGoalProgress:n,totalGoalTarget:t,currentBalance:e.currentBalance,projectedBalance:o,savingsRate:a>0?(a-r)/a*100:0,expensesByCategory:l,goalsByCategory:s}}(r);return{...e,userPlan:r,financialSummary:n,lastUpdated:new Date().toISOString(),hasUnsavedChanges:!0}}function l(e,a){try{return function(e,a){switch(a.type){case n.u.INITIALIZE_STATE:return(0,t.a3)(a.payload);case n.u.RESET_STATE:return(0,t.Gl)();case n.u.SET_LOADING:return{...e,loading:{...e.loading,isLoading:a.payload}};case n.u.SET_LOADING_INCOME:return{...e,loading:{...e.loading,isLoadingIncome:a.payload}};case n.u.SET_LOADING_EXPENSES:return{...e,loading:{...e.loading,isLoadingExpenses:a.payload}};case n.u.SET_LOADING_GOALS:return{...e,loading:{...e.loading,isLoadingGoals:a.payload}};case n.u.SET_LOADING_FORECAST:return{...e,loading:{...e.loading,isLoadingForecast:a.payload}};case n.u.SET_SAVING:return{...e,loading:{...e.loading,isSaving:a.payload}};case n.u.SET_ERROR:return{...e,error:{...e.error,[a.payload.errorType]:a.payload.message}};case n.u.CLEAR_ERROR:if(a.payload)return{...e,error:{...e.error,[a.payload]:null}};return{...e,error:t.mS};case n.u.ADD_INCOME:return o(e,{...e.userPlan,income:[...e.userPlan.income,a.payload]});case n.u.UPDATE_INCOME:return o(e,{...e.userPlan,income:e.userPlan.income.map(e=>e.id===a.payload.id?a.payload:e)});case n.u.DELETE_INCOME:return o(e,{...e.userPlan,income:e.userPlan.income.filter(e=>e.id!==a.payload)});case n.u.SET_INCOME_LIST:return o(e,{...e.userPlan,income:a.payload});case n.u.ADD_EXPENSE:return o(e,{...e.userPlan,expenses:[...e.userPlan.expenses,a.payload]});case n.u.UPDATE_EXPENSE:return o(e,{...e.userPlan,expenses:e.userPlan.expenses.map(e=>e.id===a.payload.id?a.payload:e)});case n.u.DELETE_EXPENSE:return o(e,{...e.userPlan,expenses:e.userPlan.expenses.filter(e=>e.id!==a.payload)});case n.u.SET_EXPENSE_LIST:return o(e,{...e.userPlan,expenses:a.payload});case n.u.ADD_GOAL:return o(e,{...e.userPlan,goals:[...e.userPlan.goals,a.payload]});case n.u.UPDATE_GOAL:return o(e,{...e.userPlan,goals:e.userPlan.goals.map(e=>e.id===a.payload.id?a.payload:e)});case n.u.DELETE_GOAL:return o(e,{...e.userPlan,goals:e.userPlan.goals.filter(e=>e.id!==a.payload)});case n.u.SET_GOAL_LIST:return o(e,{...e.userPlan,goals:a.payload});case n.u.SET_FORECAST:return o(e,{...e.userPlan,forecast:a.payload});case n.u.REGENERATE_FORECAST:return{...e,loading:{...e.loading,isLoadingForecast:!0}};case n.u.UPDATE_FORECAST_CONFIG:return o(e,{...e.userPlan,forecastConfig:{...e.userPlan.forecastConfig,...a.payload,updatedAt:new Date().toISOString()}});case n.u.SET_USER_PLAN:return o(e,a.payload);case n.u.UPDATE_CURRENT_BALANCE:return o(e,{...e.userPlan,currentBalance:a.payload});case n.u.SAVE_SUCCESS:return{...e,hasUnsavedChanges:!1,loading:{...e.loading,isSaving:!1},error:{...e.error,generalError:null}};case n.u.SAVE_ERROR:return{...e,loading:{...e.loading,isSaving:!1},error:{...e.error,generalError:a.payload}};case n.u.LOAD_SUCCESS:return{...o(e,a.payload),loading:{...e.loading,isLoading:!1},error:{...e.error,generalError:null},hasUnsavedChanges:!1};case n.u.LOAD_ERROR:return{...e,loading:{...e.loading,isLoading:!1},error:{...e.error,generalError:a.payload}};case n.u.MARK_UNSAVED_CHANGES:return{...e,hasUnsavedChanges:!0};case n.u.MARK_SAVED:return{...e,hasUnsavedChanges:!1};default:return console.warn("Unknown action type:",a.type),e}}(e,a)}catch(a){return console.error("âŒ Reducer Error:",a),{...e,error:{...e.error,generalError:a instanceof Error?a.message:"An unknown error occurred"}}}}},4479:(e,a,r)=>{r.d(a,{Gl:()=>i,W6:()=>t,a3:()=>c,mS:()=>o});var n=r(4552);let t={startingBalance:0,startDate:new Date().toISOString().slice(0,7),months:12,includeGoalContributions:!0,conservativeMode:!1,updatedAt:new Date().toISOString()},E={isLoading:!1,isLoadingIncome:!1,isLoadingExpenses:!1,isLoadingGoals:!1,isLoadingForecast:!1,isSaving:!1},o={generalError:null,incomeError:null,expenseError:null,goalError:null,forecastError:null},l={id:"default-plan",income:[],expenses:[],goals:[],forecast:[],currentBalance:0,forecastConfig:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s={totalMonthlyIncome:0,totalMonthlyExpenses:0,totalGoalProgress:0,totalGoalTarget:0,currentBalance:0,projectedBalance:0,savingsRate:0,expensesByCategory:{[n.Lc.HOUSING]:0,[n.Lc.TRANSPORTATION]:0,[n.Lc.FOOD]:0,[n.Lc.UTILITIES]:0,[n.Lc.INSURANCE]:0,[n.Lc.HEALTHCARE]:0,[n.Lc.ENTERTAINMENT]:0,[n.Lc.PERSONAL_CARE]:0,[n.Lc.EDUCATION]:0,[n.Lc.DEBT_PAYMENTS]:0,[n.Lc.SAVINGS]:0,[n.Lc.TRAVEL]:0,[n.Lc.SHOPPING]:0,[n.Lc.KIDS]:0,[n.Lc.MISCELLANEOUS]:0},goalsByCategory:{[n.QO.EMERGENCY_FUND]:0,[n.QO.RETIREMENT]:0,[n.QO.EDUCATION]:0,[n.QO.HOME_PURCHASE]:0,[n.QO.VACATION]:0,[n.QO.DEBT_PAYOFF]:0,[n.QO.MAJOR_PURCHASE]:0,[n.QO.INVESTMENT]:0,[n.QO.OTHER]:0}},u={userPlan:l,financialSummary:s,loading:E,error:o,lastUpdated:new Date().toISOString(),hasUnsavedChanges:!1};function i(){let e=new Date().toISOString();return{...u,userPlan:{...l,createdAt:e,updatedAt:e},lastUpdated:e}}function c(e){return{...u,...e,userPlan:{...l,...e.userPlan},loading:{...E,...e.loading},error:{...o,...e.error},financialSummary:{...s,...e.financialSummary}}}},4552:(e,a,r)=>{r.d(a,{IW:()=>l,Lc:()=>t,QO:()=>o,bx:()=>E,jN:()=>n});var n=function(e){return e.DAILY="daily",e.WEEKLY="weekly",e.BIWEEKLY="biweekly",e.MONTHLY="monthly",e.QUARTERLY="quarterly",e.YEARLY="yearly",e.ONE_TIME="one_time",e}({}),t=function(e){return e.HOUSING="housing",e.TRANSPORTATION="transportation",e.FOOD="food",e.UTILITIES="utilities",e.INSURANCE="insurance",e.HEALTHCARE="healthcare",e.ENTERTAINMENT="entertainment",e.PERSONAL_CARE="personal_care",e.EDUCATION="education",e.DEBT_PAYMENTS="debt_payments",e.SAVINGS="savings",e.TRAVEL="travel",e.SHOPPING="shopping",e.KIDS="kids",e.MISCELLANEOUS="miscellaneous",e}({}),E=function(e){return e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e}({}),o=function(e){return e.EMERGENCY_FUND="emergency_fund",e.RETIREMENT="retirement",e.EDUCATION="education",e.HOME_PURCHASE="home_purchase",e.VACATION="vacation",e.DEBT_PAYOFF="debt_payoff",e.MAJOR_PURCHASE="major_purchase",e.INVESTMENT="investment",e.OTHER="other",e}({}),l=function(e){return e.FIXED_AMOUNT="fixed_amount",e.OPEN_ENDED="open_ended",e}({})},4789:(e,a,r)=>{r.d(a,{$F:()=>G,$V:()=>t,$d:()=>h,$x:()=>L,Ar:()=>u,B$:()=>A,B9:()=>I,D:()=>N,ET:()=>d,Ek:()=>P,Hj:()=>m,Ik:()=>w,M9:()=>F,TO:()=>y,Tw:()=>C,Wt:()=>p,Wz:()=>g,XU:()=>S,eY:()=>O,hL:()=>D,hj:()=>s,iA:()=>f,iR:()=>o,k5:()=>_,li:()=>i,qg:()=>l,r1:()=>E,rJ:()=>T,se:()=>U,zm:()=>R});var n=r(7119);let t=()=>({type:n.u.RESET_STATE}),E=e=>({type:n.u.SET_LOADING,payload:e}),o=e=>({type:n.u.SET_LOADING_INCOME,payload:e}),l=e=>({type:n.u.SET_LOADING_EXPENSES,payload:e}),s=e=>({type:n.u.SET_LOADING_GOALS,payload:e}),u=e=>({type:n.u.SET_LOADING_FORECAST,payload:e}),i=e=>({type:n.u.SET_SAVING,payload:e}),c=(e,a)=>({type:n.u.SET_ERROR,payload:{errorType:e,message:a}}),d=e=>({type:n.u.CLEAR_ERROR,payload:e}),A=e=>({type:n.u.ADD_INCOME,payload:e}),S=e=>({type:n.u.UPDATE_INCOME,payload:e}),T=e=>({type:n.u.DELETE_INCOME,payload:e}),_=e=>({type:n.u.ADD_EXPENSE,payload:e}),O=e=>({type:n.u.UPDATE_EXPENSE,payload:e}),g=e=>({type:n.u.DELETE_EXPENSE,payload:e}),N=e=>({type:n.u.ADD_GOAL,payload:e}),y=e=>({type:n.u.UPDATE_GOAL,payload:e}),L=e=>({type:n.u.DELETE_GOAL,payload:e}),p=()=>({type:n.u.REGENERATE_FORECAST}),R=e=>({type:n.u.UPDATE_FORECAST_CONFIG,payload:e}),I=e=>({type:n.u.SET_USER_PLAN,payload:e}),D=e=>({type:n.u.UPDATE_CURRENT_BALANCE,payload:e}),C=()=>({type:n.u.SAVE_SUCCESS}),P=e=>({type:n.u.SAVE_ERROR,payload:e}),f=e=>({type:n.u.LOAD_SUCCESS,payload:e}),m=e=>({type:n.u.LOAD_ERROR,payload:e}),h=e=>c("generalError",e),U=e=>c("incomeError",e),G=e=>c("expenseError",e),w=e=>c("goalError",e),F=e=>c("forecastError",e)},6930:(e,a,r)=>{r.d(a,{FinancialProvider:()=>i,useErrorState:()=>S,useFinancialActions:()=>d,useFinancialContext:()=>u,useFinancialState:()=>c,useFinancialSummary:()=>T,useLoadingState:()=>A});var n=r(5155),t=r(2115),E=r(3818),o=r(4479),l=r(4789);let s=(0,t.createContext)(void 0);function u(){let e=(0,t.useContext)(s);if(void 0===e)throw Error("useFinancialContext must be used within a FinancialProvider");return e}function i(e){let{children:a,initialState:u}=e,[i,c]=(0,t.useReducer)(E.m,u?(0,o.a3)(u):(0,o.Gl)());(0,t.useEffect)(()=>{"default-plan"===i.userPlan.id&&0===i.userPlan.income.length&&0===i.userPlan.expenses.length&&0===i.userPlan.goals.length&&(async()=>{try{c(l.r1(!0)),c(l.ET("generalError"));let{loadUserPlan:e}=await r.e(931).then(r.bind(r,2931)),a=await e();a?c(l.iA(a)):c(l.r1(!1))}catch(a){let e=a instanceof Error?a.message:"Failed to load user plan";c(l.Hj(e))}})()},[]),(0,t.useEffect)(()=>{if(("default-plan"!==i.userPlan.id||i.userPlan.income.length>0||i.userPlan.expenses.length>0||i.userPlan.goals.length>0)&&!i.loading.isLoading&&!i.loading.isSaving&&i.hasUnsavedChanges){let e=setTimeout(async()=>{try{let{saveUserPlan:e}=await r.e(931).then(r.bind(r,2931)),a=await e(i.userPlan);a.id!==i.userPlan.id&&c(l.B9(a)),c(l.Tw())}catch(e){console.error("Auto-save failed:",e)}},1e3);return()=>clearTimeout(e)}},[i.userPlan,i.hasUnsavedChanges,i.loading.isLoading,i.loading.isSaving]);let d=(0,t.useCallback)(e=>"".concat(e,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),[]),A=(0,t.useCallback)(async e=>{try{c(l.iR(!0)),c(l.ET("incomeError"));let a={id:d("income"),...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(l.B$(a))}catch(a){let e=a instanceof Error?a.message:"Failed to add income";throw c(l.se(e)),a}finally{c(l.iR(!1))}},[d]),S=(0,t.useCallback)(async e=>{try{c(l.iR(!0)),c(l.ET("incomeError"));let a=i.userPlan.income.find(a=>a.id===e.id);if(!a)throw Error("Income not found");let r={...a,...e,updatedAt:new Date().toISOString()};c(l.XU(r))}catch(a){let e=a instanceof Error?a.message:"Failed to update income";throw c(l.se(e)),a}finally{c(l.iR(!1))}},[i.userPlan.income]),T=(0,t.useCallback)(async e=>{try{c(l.iR(!0)),c(l.ET("incomeError")),c(l.rJ(e))}catch(a){let e=a instanceof Error?a.message:"Failed to delete income";throw c(l.se(e)),a}finally{c(l.iR(!1))}},[]),_=(0,t.useCallback)(async e=>{try{c(l.qg(!0)),c(l.ET("expenseError"));let a={id:d("expense"),...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(l.k5(a))}catch(a){let e=a instanceof Error?a.message:"Failed to add expense";throw c(l.$F(e)),a}finally{c(l.qg(!1))}},[d]),O=(0,t.useCallback)(async e=>{try{c(l.qg(!0)),c(l.ET("expenseError"));let a=i.userPlan.expenses.find(a=>a.id===e.id);if(!a)throw Error("Expense not found");let r={...a,...e,updatedAt:new Date().toISOString()};c(l.eY(r))}catch(a){let e=a instanceof Error?a.message:"Failed to update expense";throw c(l.$F(e)),a}finally{c(l.qg(!1))}},[i.userPlan.expenses]),g=(0,t.useCallback)(async e=>{try{c(l.qg(!0)),c(l.ET("expenseError")),c(l.Wz(e))}catch(a){let e=a instanceof Error?a.message:"Failed to delete expense";throw c(l.$F(e)),a}finally{c(l.qg(!1))}},[]),N=(0,t.useCallback)(async e=>{try{c(l.hj(!0)),c(l.ET("goalError"));let a={id:d("goal"),...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(l.D(a))}catch(a){let e=a instanceof Error?a.message:"Failed to add goal";throw c(l.Ik(e)),a}finally{c(l.hj(!1))}},[d]),y=(0,t.useCallback)(async e=>{try{c(l.hj(!0)),c(l.ET("goalError"));let a=i.userPlan.goals.find(a=>a.id===e.id);if(!a)throw Error("Goal not found");let r={...a,...e,updatedAt:new Date().toISOString()};c(l.TO(r))}catch(a){let e=a instanceof Error?a.message:"Failed to update goal";throw c(l.Ik(e)),a}finally{c(l.hj(!1))}},[i.userPlan.goals]),L=(0,t.useCallback)(async e=>{try{c(l.hj(!0)),c(l.ET("goalError")),c(l.$x(e))}catch(a){let e=a instanceof Error?a.message:"Failed to delete goal";throw c(l.Ik(e)),a}finally{c(l.hj(!1))}},[]),p=(0,t.useCallback)(async()=>{try{c(l.Ar(!0)),c(l.ET("forecastError")),c(l.Wt())}catch(a){let e=a instanceof Error?a.message:"Failed to regenerate forecast";throw c(l.M9(e)),a}finally{c(l.Ar(!1))}},[]),R=(0,t.useCallback)(async e=>{try{c(l.li(!0)),c(l.ET("generalError")),c(l.hL(e))}catch(a){let e=a instanceof Error?a.message:"Failed to update balance";throw c(l.$d(e)),a}finally{c(l.li(!1))}},[]),I=(0,t.useCallback)(async e=>{try{c(l.Ar(!0)),c(l.ET("forecastError")),c(l.zm(e))}catch(a){let e=a instanceof Error?a.message:"Failed to update forecast config";throw c(l.M9(e)),a}finally{c(l.Ar(!1))}},[]),D=(0,t.useCallback)(async()=>{try{c(l.li(!0)),c(l.ET("generalError"));let{saveUserPlan:e}=await r.e(931).then(r.bind(r,2931)),a=await e(i.userPlan);a.id!==i.userPlan.id&&c(l.B9(a)),c(l.Tw())}catch(a){let e=a instanceof Error?a.message:"Failed to save user plan";throw c(l.Ek(e)),a}},[i.userPlan]),C=(0,t.useCallback)(async()=>{try{c(l.r1(!0)),c(l.ET("generalError"));let{loadUserPlan:e}=await r.e(931).then(r.bind(r,2931)),a=await e();a?c(l.iA(a)):c(l.r1(!1))}catch(a){let e=a instanceof Error?a.message:"Failed to load user plan";throw c(l.Hj(e)),a}},[]),P=(0,t.useCallback)(()=>{c(l.$V())},[]),f=(0,t.useCallback)(e=>{c(l.ET(e))},[]);return(0,n.jsx)(s.Provider,{value:{state:i,dispatch:c,addIncome:A,updateIncome:S,deleteIncome:T,addExpense:_,updateExpense:O,deleteExpense:g,addGoal:N,updateGoal:y,deleteGoal:L,regenerateForecast:p,updateCurrentBalance:R,updateForecastConfig:I,saveUserPlan:D,loadUserPlan:C,resetAll:P,clearError:f},children:a})}function c(){let{state:e}=u();return e}function d(){let{addIncome:e,updateIncome:a,deleteIncome:r,addExpense:n,updateExpense:t,deleteExpense:E,addGoal:o,updateGoal:l,deleteGoal:s,regenerateForecast:i,updateCurrentBalance:c,updateForecastConfig:d,saveUserPlan:A,loadUserPlan:S,resetAll:T,clearError:_}=u();return{addIncome:e,updateIncome:a,deleteIncome:r,addExpense:n,updateExpense:t,deleteExpense:E,addGoal:o,updateGoal:l,deleteGoal:s,regenerateForecast:i,updateCurrentBalance:c,updateForecastConfig:d,saveUserPlan:A,loadUserPlan:S,resetAll:T,clearError:_}}function A(){let{state:e}=u();return e.loading}function S(){let{state:e}=u();return e.error}function T(){let{state:e}=u();return e.financialSummary}},7119:(e,a,r)=>{r.d(a,{u:()=>n});var n=function(e){return e.INITIALIZE_STATE="INITIALIZE_STATE",e.RESET_STATE="RESET_STATE",e.SET_LOADING="SET_LOADING",e.SET_LOADING_INCOME="SET_LOADING_INCOME",e.SET_LOADING_EXPENSES="SET_LOADING_EXPENSES",e.SET_LOADING_GOALS="SET_LOADING_GOALS",e.SET_LOADING_FORECAST="SET_LOADING_FORECAST",e.SET_SAVING="SET_SAVING",e.SET_ERROR="SET_ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.ADD_INCOME="ADD_INCOME",e.UPDATE_INCOME="UPDATE_INCOME",e.DELETE_INCOME="DELETE_INCOME",e.SET_INCOME_LIST="SET_INCOME_LIST",e.ADD_EXPENSE="ADD_EXPENSE",e.UPDATE_EXPENSE="UPDATE_EXPENSE",e.DELETE_EXPENSE="DELETE_EXPENSE",e.SET_EXPENSE_LIST="SET_EXPENSE_LIST",e.ADD_GOAL="ADD_GOAL",e.UPDATE_GOAL="UPDATE_GOAL",e.DELETE_GOAL="DELETE_GOAL",e.SET_GOAL_LIST="SET_GOAL_LIST",e.SET_FORECAST="SET_FORECAST",e.REGENERATE_FORECAST="REGENERATE_FORECAST",e.UPDATE_FORECAST_CONFIG="UPDATE_FORECAST_CONFIG",e.SET_USER_PLAN="SET_USER_PLAN",e.UPDATE_CURRENT_BALANCE="UPDATE_CURRENT_BALANCE",e.SAVE_SUCCESS="SAVE_SUCCESS",e.SAVE_ERROR="SAVE_ERROR",e.LOAD_SUCCESS="LOAD_SUCCESS",e.LOAD_ERROR="LOAD_ERROR",e.MARK_UNSAVED_CHANGES="MARK_UNSAVED_CHANGES",e.MARK_SAVED="MARK_SAVED",e}({})}}]);