(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{849:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(5155),s=t(2115),n=t(5426),l=t(4552),o=t(7270);function i(){let e=(0,n.SO)(),{addIncome:r,updateIncome:t,deleteIncome:i}=(0,n.MY)(),{formatCurrency:d}=(0,o.H)(),[c,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{c&&g.current&&g.current.scrollIntoView({behavior:"smooth",block:"start"})},[c]);let[y,h]=(0,s.useState)({name:"",amount:0,frequency:l.jN.MONTHLY,description:"",startDate:new Date().toISOString().split("T")[0],endDate:"",isActive:!0}),b=(e,r)=>{h(t=>({...t,[e]:r}))},v=async e=>{e.preventDefault();try{if(u){let e={id:u,...y};await t(e),x(null)}else await r(y),m(!1);h({name:"",amount:0,frequency:l.jN.MONTHLY,description:"",startDate:new Date().toISOString().split("T")[0],endDate:"",isActive:!0})}catch(e){console.error("Failed to save income:",e)}},p=e=>{h({name:e.name,amount:e.amount,frequency:e.frequency,description:e.description||"",startDate:e.startDate?e.startDate.split("T")[0]:new Date().toISOString().split("T")[0],endDate:e.endDate?e.endDate.split("T")[0]:"",isActive:e.isActive}),x(e.id),m(!0)},j=async e=>{if(window.confirm("Are you sure you want to delete this income source?"))try{await i(e)}catch(e){console.error("Failed to delete income:",e)}},k=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase().replace("_"," "),f=(e,r)=>{switch(r){case l.jN.DAILY:return 30.44*e;case l.jN.WEEKLY:return 4.33*e;case l.jN.BIWEEKLY:return 2.17*e;case l.jN.MONTHLY:return e;case l.jN.QUARTERLY:return e/3;case l.jN.YEARLY:return e/12;case l.jN.ONE_TIME:return 0;default:return e}},N=e.userPlan.income.filter(e=>e.isActive).reduce((e,r)=>e+f(r.amount,r.frequency),0);return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Income Management"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Manage your income sources and track your earning potential"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Monthly Income"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d(N)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["from ",e.userPlan.income.filter(e=>e.isActive).length," ","active sources"]})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Income Sources"}),(0,a.jsxs)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Income Source"]})]}),c&&(0,a.jsxs)("div",{ref:g,className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border-2 border-blue-200 dark:border-blue-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:u?"Edit Income Source":"Add New Income Source"}),u&&(0,a.jsxs)("div",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:["\uD83D\uDCDD ",y.name||"Income Source"]})]}),(0,a.jsxs)("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Income Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:y.name,onChange:e=>b("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",placeholder:"e.g., Salary, Freelance, Investment"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (THB) *"}),(0,a.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:0===y.amount?"":y.amount,onChange:e=>b("amount",parseFloat(e.target.value)||0),onFocus:e=>{"0"===e.target.value&&(e.target.value="")},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency *"}),(0,a.jsx)("select",{required:!0,value:y.frequency,onChange:e=>b("frequency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",children:Object.values(l.jN).map(e=>(0,a.jsx)("option",{value:e,children:k(e)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:y.startDate,onChange:e=>b("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:y.endDate,onChange:e=>b("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",min:y.startDate}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty for ongoing income"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:y.description,onChange:e=>b("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-gray-100",placeholder:"Additional details about this income source..."})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:y.isActive,onChange:e=>b("isActive",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Active income source"})]})}),(0,a.jsxs)("div",{className:"md:col-span-2 flex gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:e.loading.isLoadingIncome,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.loading.isLoadingIncome?"Saving...":u?"Update Income":"Add Income"}),(0,a.jsx)("button",{type:"button",onClick:()=>{m(!1),x(null),h({name:"",amount:0,frequency:l.jN.MONTHLY,description:"",startDate:new Date().toISOString().split("T")[0],endDate:"",isActive:!0})},className:"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-6 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:0===e.userPlan.income.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 text-gray-300 dark:text-gray-600",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No income sources yet"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Start by adding your first income source to track your earnings"}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Income"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.userPlan.income.map(e=>(0,a.jsxs)("div",{className:"p-6 transition-all duration-300 ".concat(u===e.id?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg":""),children:[u===e.id&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-blue-600 dark:text-blue-400 text-sm font-medium",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Currently editing this income source"]}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:e.isActive?"Active":"Inactive"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Amount"}),(0,a.jsxs)("div",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[d(e.amount)," ",(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["/ ",k(e.frequency)]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monthly Equivalent"}),(0,a.jsx)("div",{className:"text-lg font-medium text-green-600 dark:text-green-400",children:d(f(e.amount,e.frequency))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Start Date"}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:e.startDate?new Date(e.startDate).toLocaleDateString():"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"End Date"}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:e.endDate?(0,a.jsx)("span",{className:new Date(e.endDate)<new Date?"text-red-600 dark:text-red-400":"",children:new Date(e.endDate).toLocaleDateString()}):(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"Ongoing"})})]})]}),e.description&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>p(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit income",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete income",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e.id))})}),e.error.incomeError&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:e.error.incomeError})]})]})})]})}},4846:(e,r,t)=>{Promise.resolve().then(t.bind(t,849))},5426:(e,r,t)=>{"use strict";t.d(r,{MY:()=>a.useFinancialActions,SO:()=>a.useFinancialState,k_:()=>a.useFinancialContext});var a=t(6930);t(3818),t(4789),t(4479)},7270:(e,r,t)=>{"use strict";t.d(r,{CurrencyProvider:()=>o,H:()=>i,V:()=>n});var a=t(5155),s=t(2115);let n={USD:{code:"USD",symbol:"$",name:"US Dollar",locale:"en-US"},EUR:{code:"EUR",symbol:"€",name:"Euro",locale:"en-US"},GBP:{code:"GBP",symbol:"\xa3",name:"British Pound",locale:"en-GB"},JPY:{code:"JPY",symbol:"\xa5",name:"Japanese Yen",locale:"ja-JP"},THB:{code:"THB",symbol:"฿",name:"Thai Baht",locale:"th-TH"},AUD:{code:"AUD",symbol:"A$",name:"Australian Dollar",locale:"en-AU"},CAD:{code:"CAD",symbol:"C$",name:"Canadian Dollar",locale:"en-CA"},CHF:{code:"CHF",symbol:"Fr",name:"Swiss Franc",locale:"de-CH"},CNY:{code:"CNY",symbol:"\xa5",name:"Chinese Yuan",locale:"zh-CN"},SGD:{code:"SGD",symbol:"S$",name:"Singapore Dollar",locale:"en-SG"},INR:{code:"INR",symbol:"₹",name:"Indian Rupee",locale:"en-IN"},KRW:{code:"KRW",symbol:"₩",name:"South Korean Won",locale:"ko-KR"}},l=(0,s.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,s.useState)("USD"),[i,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("finance-planner-currency");e&&n[e]&&o(e),d(!0)},[]),(0,s.useEffect)(()=>{i&&localStorage.setItem("finance-planner-currency",t)},[t,i]);let c=()=>n[t];return(0,a.jsx)(l.Provider,{value:{currency:t,setCurrency:e=>{o(e)},formatCurrency:function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=c();return r&&Math.abs(e)>=1e6?new Intl.NumberFormat(t.locale,{style:"currency",currency:t.code,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:1}).format(e):new Intl.NumberFormat(t.locale,{style:"currency",currency:t.code,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},formatNumber:e=>{let r=c();return new Intl.NumberFormat(r.locale,{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},parseCurrency:e=>{let r=parseFloat(e.replace(/[฿$€£¥₹₩Fr,\s]/g,"").replace(/[A-Z]/g,"").replace(/[^\d.-]/g,""));return isNaN(r)?0:r},getCurrencyInfo:c},children:r})}function i(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCurrency must be used within a CurrencyProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[930,441,684,358],()=>r(4846)),_N_E=e.O()}]);